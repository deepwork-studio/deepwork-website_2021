{"ast":null,"code":"var _jsxFileName = \"/Users/mathiasbakken/deepwork-website/deepwork-website/src/pages/CaseStudy/CaseStudy.tsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useRef, useState } from 'react';\nimport { useParams } from 'react-router';\nimport { Box, Button, Container, Grid, Link, Typography } from '@material-ui/core';\nimport { PageHeader } from '../../components/PageHeader';\nimport { CASE_STUDIES } from '../../data/case-studies';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport KeyboardArrowDownIcon from '@material-ui/icons/KeyboardArrowDown';\nimport { CircleIcon } from '../../components/CircleIcon';\nimport { RoutePaths } from '../../routePaths';\nimport { useHistory } from 'react-router-dom';\nimport { TalkingPoint } from './components';\nimport { useStyles, AccordionDetails, AccordionSummary, Accordion } from './styles';\nimport { CaseStudyTypeStyled } from '../../components/CaseStudyTypeStyled';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const CaseStudy = () => {\n  _s();\n\n  var _caseStudy$details2, _caseStudy$bottomLink, _caseStudy$details3, _caseStudy$details4, _caseStudy$details5;\n\n  const history = useHistory();\n  const [expanded, setExpanded] = useState();\n  const params = useParams();\n  const [caseStudy, setCaseStudy] = useState(null);\n  const [nextStudy, setNextStudy] = useState(null);\n  const [listLabels, setListLabels] = useState([]);\n  const [scrollToItem, setScrollToItem] = useState(null);\n  const talkingPointsRef = useRef([]);\n  const contentRef = useRef(null);\n  const [activeItem, setActiveItem] = useState('');\n  const classes = useStyles();\n  useEffect(() => {\n    setActiveItem(listLabels[0]);\n  }, [listLabels]);\n  useEffect(() => {\n    var _caseStudy$details$ta, _caseStudy$details;\n\n    setListLabels((_caseStudy$details$ta = caseStudy === null || caseStudy === void 0 ? void 0 : (_caseStudy$details = caseStudy.details) === null || _caseStudy$details === void 0 ? void 0 : _caseStudy$details.talkingPoints.map(item => item.label)) !== null && _caseStudy$details$ta !== void 0 ? _caseStudy$details$ta : []);\n  }, [caseStudy === null || caseStudy === void 0 ? void 0 : (_caseStudy$details2 = caseStudy.details) === null || _caseStudy$details2 === void 0 ? void 0 : _caseStudy$details2.talkingPoints]);\n  useEffect(() => {\n    if (params.slug) {\n      const foundIndex = CASE_STUDIES.findIndex(item => item.slug === decodeURIComponent(params.slug));\n      const found = CASE_STUDIES[foundIndex];\n\n      if (found) {\n        var _found$details, _found$details2;\n\n        let filteredTalkingPoints = (_found$details = found.details) === null || _found$details === void 0 ? void 0 : _found$details.talkingPoints.filter(tp => {\n          var _tp$links;\n\n          return !(tp.label.toLowerCase() === 'additional files' && !((_tp$links = tp.links) === null || _tp$links === void 0 ? void 0 : _tp$links.some(link => Boolean(link.label))));\n        });\n        setCaseStudy({ ...found,\n          details: {\n            description: ((_found$details2 = found.details) === null || _found$details2 === void 0 ? void 0 : _found$details2.description) || '',\n            talkingPoints: filteredTalkingPoints || []\n          }\n        });\n      }\n\n      const nextStudy = CASE_STUDIES.length === foundIndex + 1 ? CASE_STUDIES[0] : CASE_STUDIES[foundIndex + 1];\n      setNextStudy(nextStudy);\n    }\n  }, [params.slug]);\n  useEffect(() => {\n    const observer = new IntersectionObserver(entries => {\n      entries.forEach(entry => {\n        var _entry$target$parentE;\n\n        // @ts-ignore\n        const id = entry.target.dataset['id'];\n\n        if (!((_entry$target$parentE = entry.target.parentElement) === null || _entry$target$parentE === void 0 ? void 0 : _entry$target$parentE.dataset['id'])) {\n          return;\n        }\n\n        if (entry.isIntersecting) {\n          setActiveItem(id);\n        } else {\n          var _entry$target$previou;\n\n          // @ts-ignore\n          const siblingId = (_entry$target$previou = entry.target.previousElementSibling) === null || _entry$target$previou === void 0 ? void 0 : _entry$target$previou.dataset['id'];\n          setActiveItem(prev => siblingId && entry.isIntersecting ? siblingId : prev);\n        }\n      });\n    }, {\n      threshold: 0.5\n    });\n    talkingPointsRef.current = observer;\n  }, []);\n\n  const handleClickListItem = index => () => {\n    setScrollToItem(index);\n  };\n\n  const handleNextClick = () => {\n    (nextStudy === null || nextStudy === void 0 ? void 0 : nextStudy.slug) && history.push(RoutePaths.caseStudy.replace(':slug', nextStudy === null || nextStudy === void 0 ? void 0 : nextStudy.slug));\n  };\n\n  const handleScroll = () => {\n    var _contentRef$current;\n\n    (_contentRef$current = contentRef.current) === null || _contentRef$current === void 0 ? void 0 : _contentRef$current.scrollIntoView({\n      behavior: 'smooth'\n    });\n  };\n\n  const handleChange = panel => (event, newExpanded) => {\n    setExpanded(newExpanded ? panel : false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.caseStudyWrapper,\n    children: [/*#__PURE__*/_jsxDEV(Container, {\n      maxWidth: \"lg\",\n      children: /*#__PURE__*/_jsxDEV(PageHeader, {\n        title: caseStudy === null || caseStudy === void 0 ? void 0 : caseStudy.title,\n        preffix: (caseStudy === null || caseStudy === void 0 ? void 0 : caseStudy.type) ? /*#__PURE__*/_jsxDEV(CaseStudyTypeStyled, {\n          type: caseStudy === null || caseStudy === void 0 ? void 0 : caseStudy.type\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 38\n        }, this) : '',\n        subtitle: /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: caseStudy === null || caseStudy === void 0 ? void 0 : caseStudy.description\n        }, void 0, false),\n        buttons: caseStudy === null || caseStudy === void 0 ? void 0 : (_caseStudy$bottomLink = caseStudy.bottomLinks) === null || _caseStudy$bottomLink === void 0 ? void 0 : _caseStudy$bottomLink.map(item => ({\n          title: item.title,\n          link: item.url,\n          type: item.type,\n          icon: /*#__PURE__*/_jsxDEV(KeyboardArrowDownIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 19\n          }, this),\n          onClick: !item.url ? handleScroll : null\n        }))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      ref: contentRef,\n      maxWidth: false,\n      className: classes.mainImageWrapper,\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        position: \"relative\",\n        zIndex: 999,\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: caseStudy === null || caseStudy === void 0 ? void 0 : caseStudy.mainImage,\n          alt: caseStudy === null || caseStudy === void 0 ? void 0 : caseStudy.title,\n          className: classes.mainImage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.withBackgroundImage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      maxWidth: \"xl\",\n      className: classes.contentWrapper,\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        className: classes.verticalDivider,\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          justifyContent: \"space-between\",\n          className: classes.desktopTalkingPointsWrapper,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            sm: 5,\n            md: 4,\n            className: classes.leftGrid,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: classes.listWrapper,\n              children: /*#__PURE__*/_jsxDEV(Box, {\n                className: classes.list,\n                display: \"flex\",\n                flexDirection: \"column\",\n                alignItems: \"flex-start\",\n                children: listLabels === null || listLabels === void 0 ? void 0 : listLabels.map((item, index) => /*#__PURE__*/_jsxDEV(Button, {\n                  className: `${classes.listItem} ${activeItem === item ? classes.activeListItem : ''}`,\n                  onClick: handleClickListItem(index),\n                  children: item\n                }, index, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 125,\n                  columnNumber: 21\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 123,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            item: true,\n            xs: 12,\n            sm: 12,\n            md: 8,\n            justifyContent: \"flex-end\",\n            children: /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              sm: 12,\n              \"data-id\": \"talkingPointBox\",\n              children: [/*#__PURE__*/_jsxDEV(Box, {\n                className: classes.caseStudyDescription,\n                children: /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"body1\",\n                  children: caseStudy === null || caseStudy === void 0 ? void 0 : (_caseStudy$details3 = caseStudy.details) === null || _caseStudy$details3 === void 0 ? void 0 : _caseStudy$details3.description\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 138,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 137,\n                columnNumber: 17\n              }, this), caseStudy === null || caseStudy === void 0 ? void 0 : (_caseStudy$details4 = caseStudy.details) === null || _caseStudy$details4 === void 0 ? void 0 : _caseStudy$details4.talkingPoints.map((talkingPoint, index) => /*#__PURE__*/_jsxDEV(TalkingPoint, {\n                observer: talkingPointsRef.current,\n                scrollToItem: scrollToItem !== null && scrollToItem === index,\n                talkingPoint: talkingPoint\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 141,\n                columnNumber: 19\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          className: classes.mobileTalkingPointsWrapper,\n          children: [/*#__PURE__*/_jsxDEV(Box, {\n            className: classes.caseStudyDescription,\n            children: /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body1\",\n              children: caseStudy === null || caseStudy === void 0 ? void 0 : (_caseStudy$details5 = caseStudy.details) === null || _caseStudy$details5 === void 0 ? void 0 : _caseStudy$details5.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 13\n          }, this), listLabels === null || listLabels === void 0 ? void 0 : listLabels.map((item, index) => {\n            var _caseStudy$details6, _caseStudy$details7;\n\n            return /*#__PURE__*/_jsxDEV(Accordion, {\n              square: true,\n              expanded: expanded === item,\n              onChange: handleChange(item),\n              children: [/*#__PURE__*/_jsxDEV(AccordionSummary, {\n                children: [/*#__PURE__*/_jsxDEV(Typography, {\n                  children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: item\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 159,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 158,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Box, {\n                  ml: 1.5,\n                  children: expanded === item ? /*#__PURE__*/_jsxDEV(ExpandLessIcon, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 161,\n                    columnNumber: 54\n                  }, this) : /*#__PURE__*/_jsxDEV(ExpandMoreIcon, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 161,\n                    columnNumber: 75\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 161,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 157,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(AccordionDetails, {\n                children: /*#__PURE__*/_jsxDEV(Box, {\n                  className: classes.mobileCaseStudyDescription,\n                  children: (caseStudy === null || caseStudy === void 0 ? void 0 : (_caseStudy$details6 = caseStudy.details) === null || _caseStudy$details6 === void 0 ? void 0 : _caseStudy$details6.talkingPoints[index]) && /*#__PURE__*/_jsxDEV(TalkingPoint, {\n                    observer: talkingPointsRef.current,\n                    scrollToItem: scrollToItem !== null && scrollToItem === index,\n                    talkingPoint: caseStudy === null || caseStudy === void 0 ? void 0 : (_caseStudy$details7 = caseStudy.details) === null || _caseStudy$details7 === void 0 ? void 0 : _caseStudy$details7.talkingPoints[index]\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 166,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 164,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 163,\n                columnNumber: 17\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 156,\n              columnNumber: 15\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          display: \"flex\",\n          mt: 10,\n          pb: 10,\n          children: /*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            justifyContent: \"flex-end\",\n            children: /*#__PURE__*/_jsxDEV(Grid, {\n              container: true,\n              item: true,\n              xs: 12,\n              sm: 11,\n              alignItems: \"center\",\n              children: [/*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 12,\n                sm: 8,\n                className: classes.nextImage,\n                children: /*#__PURE__*/_jsxDEV(Box, {\n                  component: \"figure\",\n                  mr: 7.5,\n                  children: /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: nextStudy === null || nextStudy === void 0 ? void 0 : nextStudy.mainImage,\n                    alt: nextStudy === null || nextStudy === void 0 ? void 0 : nextStudy.title,\n                    className: \"img-responsive\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 182,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 181,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 180,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 12,\n                sm: 12,\n                md: 4,\n                children: [/*#__PURE__*/_jsxDEV(Box, {\n                  mb: 3,\n                  children: /*#__PURE__*/_jsxDEV(Link, {\n                    onClick: handleNextClick,\n                    className: classes.nextLink,\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Next Project\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 188,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(CircleIcon, {\n                      children: /*#__PURE__*/_jsxDEV(ChevronRightIcon, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 190,\n                        columnNumber: 25\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 189,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 187,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 186,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Box, {\n                  children: [/*#__PURE__*/_jsxDEV(Box, {\n                    mb: 1,\n                    children: (caseStudy === null || caseStudy === void 0 ? void 0 : caseStudy.type) ? /*#__PURE__*/_jsxDEV(CaseStudyTypeStyled, {\n                      type: caseStudy === null || caseStudy === void 0 ? void 0 : caseStudy.type\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 195,\n                      columnNumber: 52\n                    }, this) : ''\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 195,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Box, {\n                    mb: 1.4,\n                    children: /*#__PURE__*/_jsxDEV(Typography, {\n                      variant: \"h5\",\n                      children: nextStudy === null || nextStudy === void 0 ? void 0 : nextStudy.title\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 197,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 196,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"body2\",\n                    className: classes.nextStudyDescription,\n                    children: nextStudy === null || nextStudy === void 0 ? void 0 : nextStudy.description\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 199,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 194,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 185,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 97,\n    columnNumber: 5\n  }, this);\n};\n\n_s(CaseStudy, \"KnossiF2KDOyKiQ+rTUep0lzDVI=\", false, function () {\n  return [useHistory, useParams, useStyles];\n});\n\n_c = CaseStudy;\n\nvar _c;\n\n$RefreshReg$(_c, \"CaseStudy\");","map":{"version":3,"sources":["/Users/mathiasbakken/deepwork-website/deepwork-website/src/pages/CaseStudy/CaseStudy.tsx"],"names":["useEffect","useRef","useState","useParams","Box","Button","Container","Grid","Link","Typography","PageHeader","CASE_STUDIES","ChevronRightIcon","KeyboardArrowDownIcon","CircleIcon","RoutePaths","useHistory","TalkingPoint","useStyles","AccordionDetails","AccordionSummary","Accordion","CaseStudyTypeStyled","ExpandMoreIcon","ExpandLessIcon","CaseStudy","history","expanded","setExpanded","params","caseStudy","setCaseStudy","nextStudy","setNextStudy","listLabels","setListLabels","scrollToItem","setScrollToItem","talkingPointsRef","contentRef","activeItem","setActiveItem","classes","details","talkingPoints","map","item","label","slug","foundIndex","findIndex","decodeURIComponent","found","filteredTalkingPoints","filter","tp","toLowerCase","links","some","link","Boolean","description","length","observer","IntersectionObserver","entries","forEach","entry","id","target","dataset","parentElement","isIntersecting","siblingId","previousElementSibling","prev","threshold","current","handleClickListItem","index","handleNextClick","push","replace","handleScroll","scrollIntoView","behavior","handleChange","panel","event","newExpanded","caseStudyWrapper","title","type","bottomLinks","url","icon","onClick","mainImageWrapper","mainImage","withBackgroundImage","contentWrapper","verticalDivider","desktopTalkingPointsWrapper","leftGrid","listWrapper","list","listItem","activeListItem","caseStudyDescription","talkingPoint","mobileTalkingPointsWrapper","mobileCaseStudyDescription","nextImage","nextLink","nextStudyDescription"],"mappings":"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","sourcesContent":["import { ChangeEvent, FC, useEffect, useRef, useState } from 'react'\nimport { useParams } from 'react-router'\nimport { ICaseStudy } from '../CaseStudies/interfaces'\nimport { Box, Button, Container, Grid, Link, Typography } from '@material-ui/core'\nimport { PageHeader } from '../../components/PageHeader'\nimport { CASE_STUDIES } from '../../data/case-studies'\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight'\nimport KeyboardArrowDownIcon from '@material-ui/icons/KeyboardArrowDown'\nimport { CircleIcon } from '../../components/CircleIcon'\nimport { RoutePaths } from '../../routePaths'\nimport { useHistory } from 'react-router-dom'\nimport { TalkingPoint } from './components'\nimport { useStyles, AccordionDetails, AccordionSummary, Accordion } from './styles'\nimport { CaseStudyTypeStyled } from '../../components/CaseStudyTypeStyled'\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess'\n\nexport const CaseStudy: FC = () => {\n  const history = useHistory()\n  const [expanded, setExpanded] = useState<string | false>()\n  const params: { slug: string } = useParams()\n  const [caseStudy, setCaseStudy] = useState<ICaseStudy | null>(null)\n  const [nextStudy, setNextStudy] = useState<ICaseStudy | null>(null)\n  const [listLabels, setListLabels] = useState<string[]>([])\n  const [scrollToItem, setScrollToItem] = useState<number | null>(null)\n  const talkingPointsRef = useRef<any>([])\n  const contentRef = useRef<HTMLDivElement>(null)\n  const [activeItem, setActiveItem] = useState('')\n  const classes = useStyles()\n\n  useEffect(() => {\n    setActiveItem(listLabels[0])\n  }, [listLabels])\n\n  useEffect(() => {\n    setListLabels(caseStudy?.details?.talkingPoints.map((item) => item.label) ?? [])\n  }, [caseStudy?.details?.talkingPoints])\n\n  useEffect(() => {\n    if (params.slug) {\n      const foundIndex = CASE_STUDIES.findIndex((item) => item.slug === decodeURIComponent(params.slug))\n      const found = CASE_STUDIES[foundIndex]\n      if (found) {\n        let filteredTalkingPoints = found.details?.talkingPoints.filter(\n          (tp) => !(tp.label.toLowerCase() === 'additional files' && !tp.links?.some((link) => Boolean(link.label)))\n        )\n        setCaseStudy({\n          ...found,\n          details: { description: found.details?.description || '', talkingPoints: filteredTalkingPoints || [] },\n        })\n      }\n      const nextStudy = CASE_STUDIES.length === foundIndex + 1 ? CASE_STUDIES[0] : CASE_STUDIES[foundIndex + 1]\n      setNextStudy(nextStudy)\n    }\n  }, [params.slug])\n\n  useEffect(() => {\n    const observer = new IntersectionObserver(\n      (entries) => {\n        entries.forEach((entry) => {\n          // @ts-ignore\n          const id = entry.target.dataset['id']\n          if (!entry.target.parentElement?.dataset['id']) {\n            return\n          }\n          if (entry.isIntersecting) {\n            setActiveItem(id)\n          } else {\n            // @ts-ignore\n            const siblingId = entry.target.previousElementSibling?.dataset['id']\n            setActiveItem((prev) => (siblingId && entry.isIntersecting ? siblingId : prev))\n          }\n        })\n      },\n      { threshold: 0.5 }\n    )\n    talkingPointsRef.current = observer\n  }, [])\n\n  const handleClickListItem = (index: any) => () => {\n    setScrollToItem(index)\n  }\n\n  const handleNextClick = () => {\n    nextStudy?.slug && history.push(RoutePaths.caseStudy.replace(':slug', nextStudy?.slug))\n  }\n\n  const handleScroll = () => {\n    contentRef.current?.scrollIntoView({ behavior: 'smooth' })\n  }\n\n  const handleChange = (panel: string) => (event: ChangeEvent<{}>, newExpanded: boolean) => {\n    setExpanded(newExpanded ? panel : false)\n  }\n\n  return (\n    <div className={classes.caseStudyWrapper}>\n      <Container maxWidth=\"lg\">\n        <PageHeader\n          title={caseStudy?.title}\n          preffix={caseStudy?.type ? <CaseStudyTypeStyled type={caseStudy?.type} /> : ''}\n          subtitle={<>{caseStudy?.description}</>}\n          buttons={caseStudy?.bottomLinks?.map((item) => ({\n            title: item.title,\n            link: item.url,\n            type: item.type,\n            icon: <KeyboardArrowDownIcon />,\n            onClick: !item.url ? handleScroll : null,\n          }))}\n        />\n      </Container>\n      <Container ref={contentRef} maxWidth={false} className={classes.mainImageWrapper}>\n        <Box position=\"relative\" zIndex={999}>\n          <img src={caseStudy?.mainImage} alt={caseStudy?.title} className={classes.mainImage} />\n        </Box>\n        <div className={classes.withBackgroundImage} />\n      </Container>\n      <Container maxWidth=\"xl\" className={classes.contentWrapper}>\n        <Grid container className={classes.verticalDivider}>\n          <Grid container justifyContent=\"space-between\" className={classes.desktopTalkingPointsWrapper}>\n            <Grid item sm={5} md={4} className={classes.leftGrid}>\n              <div className={classes.listWrapper}>\n                <Box className={classes.list} display=\"flex\" flexDirection=\"column\" alignItems=\"flex-start\">\n                  {listLabels?.map((item, index) => (\n                    <Button\n                      key={index}\n                      className={`${classes.listItem} ${activeItem === item ? classes.activeListItem : ''}`}\n                      onClick={handleClickListItem(index)}>\n                      {item}\n                    </Button>\n                  ))}\n                </Box>\n              </div>\n            </Grid>\n            <Grid container item xs={12} sm={12} md={8} justifyContent=\"flex-end\">\n              <Grid item xs={12} sm={12} data-id=\"talkingPointBox\">\n                <Box className={classes.caseStudyDescription}>\n                  <Typography variant=\"body1\">{caseStudy?.details?.description}</Typography>\n                </Box>\n                {caseStudy?.details?.talkingPoints.map((talkingPoint, index) => (\n                  <TalkingPoint\n                    key={index}\n                    observer={talkingPointsRef.current}\n                    scrollToItem={scrollToItem !== null && scrollToItem === index}\n                    talkingPoint={talkingPoint}\n                  />\n                ))}\n              </Grid>\n            </Grid>\n          </Grid>\n          <Box className={classes.mobileTalkingPointsWrapper}>\n            <Box className={classes.caseStudyDescription}>\n              <Typography variant=\"body1\">{caseStudy?.details?.description}</Typography>\n            </Box>\n            {listLabels?.map((item, index) => (\n              <Accordion key={index} square expanded={expanded === item} onChange={handleChange(item)}>\n                <AccordionSummary>\n                  <Typography>\n                    <strong>{item}</strong>\n                  </Typography>\n                  <Box ml={1.5}>{expanded === item ? <ExpandLessIcon /> : <ExpandMoreIcon />}</Box>\n                </AccordionSummary>\n                <AccordionDetails>\n                  <Box className={classes.mobileCaseStudyDescription}>\n                    {caseStudy?.details?.talkingPoints[index] && (\n                      <TalkingPoint\n                        observer={talkingPointsRef.current}\n                        scrollToItem={scrollToItem !== null && scrollToItem === index}\n                        talkingPoint={caseStudy?.details?.talkingPoints[index]}\n                      />\n                    )}\n                  </Box>\n                </AccordionDetails>\n              </Accordion>\n            ))}\n          </Box>\n          <Box display=\"flex\" mt={10} pb={10}>\n            <Grid container justifyContent=\"flex-end\">\n              <Grid container item xs={12} sm={11} alignItems=\"center\">\n                <Grid item xs={12} sm={8} className={classes.nextImage}>\n                  <Box component=\"figure\" mr={7.5}>\n                    <img src={nextStudy?.mainImage} alt={nextStudy?.title} className=\"img-responsive\" />\n                  </Box>\n                </Grid>\n                <Grid item xs={12} sm={12} md={4}>\n                  <Box mb={3}>\n                    <Link onClick={handleNextClick} className={classes.nextLink}>\n                      <strong>Next Project</strong>\n                      <CircleIcon>\n                        <ChevronRightIcon />\n                      </CircleIcon>\n                    </Link>\n                  </Box>\n                  <Box>\n                    <Box mb={1}>{caseStudy?.type ? <CaseStudyTypeStyled type={caseStudy?.type} /> : ''}</Box>\n                    <Box mb={1.4}>\n                      <Typography variant=\"h5\">{nextStudy?.title}</Typography>\n                    </Box>\n                    <Typography variant=\"body2\" className={classes.nextStudyDescription}>\n                      {nextStudy?.description}\n                    </Typography>\n                  </Box>\n                </Grid>\n              </Grid>\n            </Grid>\n          </Box>\n        </Grid>\n      </Container>\n    </div>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}